import 'package:flutter_module/common/utils/text_util.dart';

class StatisticReportModel {
  StatisticReportModel({
    this.date,
    this.userID,
    // this.nickName,
    this.fullName,
    this.image,
    this.level,
    this.mobilePhone,
    this.lastReport,
    this.reportDetails,
    this.reportDetailsByMonth,
    this.kpiDetail,
  });

  StatisticReportModel.fromJson(dynamic json) {
    date = json['date'];
    userID = json['userID']?.toString();
    // nickName = json['nickName'];
    fullName = json['fullName'];
    image = json['image'];
    level = json['level'];
    mobilePhone = json['mobilePhone'];
    lastReport = json['lastReport'];
    reportDetails = json['reportDetail'] != null
        ? (json['reportDetail'] as Map?)?.entries.map((e) {
            return ReportDetailItemModel(
              value: e.value['value']?.toDouble(),
              type: e.value['type'],
              code: e.key,
            );
          }).toList()
        : null;
    reportDetailsByMonth = json['reportDetailByMonth'] != null
        ? (json['reportDetailByMonth'] as Map?)?.entries.map((e) {
            return ReportDetailItemModel(
              value: e.value['value']?.toDouble(),
              type: e.value['type'],
              code: e.key,
            );
          }).toList()
        : null;
    kpiDetail = json['kpiDetail'] != null ? KpiDetail.fromJson(json['kpiDetail']) : null;
  }

  String? date;
  String? userID;
  // String? nickName;
  String? fullName;
  String? image;
  String? level;
  String? mobilePhone;
  String? lastReport;
  List<ReportDetailItemModel>? reportDetails;
  List<ReportDetailItemModel>? reportDetailsByMonth;
  KpiDetail? kpiDetail;

  Map<String, dynamic> toJson() {
    final map = <String, dynamic>{};
    map['date'] = date;
    map['userID'] = userID;
    // map['nickName'] = nickName;
    map['fullName'] = fullName;
    map['image'] = image;
    map['level'] = level;
    map['mobilePhone'] = mobilePhone;
    map['lastReport'] = lastReport;
    if (kpiDetail != null) {
      map['kpiDetail'] = kpiDetail?.toJson();
    }
    return map;
  }
}

class KpiDetail {
  KpiDetail({
    this.totalIncome,
    this.estKpi,
    this.note,
  });

  KpiDetail.fromJson(dynamic json) {
    totalIncome = TextUtils.parseDouble(json['totalIncome']);
    estKpi = TextUtils.parseDouble(json['estKpi']);
    note = json['note'];
  }

  double? totalIncome;
  double? estKpi;
  String? note;

  Map<String, dynamic> toJson() {
    final map = <String, dynamic>{};
    map['totalIncome'] = totalIncome;
    map['estKpi'] = estKpi;
    map['note'] = note;
    return map;
  }
}

class ReportDetailItemModel {
  ReportDetailItemModel({
    this.value,
    this.type,
    this.code,
  });

  ReportDetailItemModel.fromJson(dynamic json) {
    value = json['value']?.toDouble();
    type = json['type'];
    code = json['code'];
  }

  double? value;
  String? type;
  String? code;

  Map<String, dynamic> toJson() {
    final map = <String, dynamic>{};
    map['value'] = value;
    map['type'] = type;
    map['code'] = code;
    return map;
  }
}
