import 'package:flutter_module/common/utils/text_util.dart';
import 'package:flutter_module/models/mtrade/config/landing_page_user_guide_model.dart';
import 'package:flutter_module/models/mtrade/order/order_knowledge_model.dart';

import 'brochure_config_model.dart';

/// product_limit : 20
/// quantity_limit : 99

class ProductConfigModel {
  ProductConfigModel({
    this.productLimit,
    this.quantityLimit,
    this.brochure,
    this.mplTermsAndConditions,
    this.mplInsuranceRules,
    this.landingPageUserGuides,
    this.socialFacebookGuide,
    this.landingPageBanner,
    this.orderKnowLedges,
  });

  ProductConfigModel.fromJson(dynamic json) {
    productLimit = json['product_limit'];
    quantityLimit = json['quantity_limit'];
    brochure = json['brochureConfig'] != null ? BrochureConfigModel.fromJson(json['brochureConfig']) : null;
    mplTermsAndConditions = json['mpl_terms_and_conditions'];
    mplInsuranceRules = json['mpl_insurance_rules'];
    if (json['landing_page_user_guide'] != null) {
      landingPageUserGuides = [];
      json['landing_page_user_guide'].forEach((v) {
        landingPageUserGuides?.add(LandingPageUserGuideModel.fromJson(v));
      });
    }
    socialFacebookGuide = json['social_facebook_guide'];
    landingPageBanner = json['landing_page_banner'] != null ? json['landing_page_banner'].cast<String>() : [];
    mplQuantityLimit = TextUtils.parseInt(json['quantity_mpl_limit']);
    if (json['order_knowledge'] != null) {
      orderKnowLedges = [];
      json['order_knowledge'].forEach((v) {
        orderKnowLedges?.add(OrderKnowledgeModel.fromJson(v));
      });
    }
  }

  int? productLimit;
  int? quantityLimit;
  BrochureConfigModel? brochure;
  String? mplTermsAndConditions;
  String? mplInsuranceRules;
  List<LandingPageUserGuideModel>? landingPageUserGuides;
  String? socialFacebookGuide;
  List<String>? landingPageBanner;
  int? mplQuantityLimit;
  List<OrderKnowledgeModel>? orderKnowLedges;

  Map<String, dynamic> toJson() {
    final map = <String, dynamic>{};
    map['product_limit'] = productLimit;
    map['quantity_limit'] = quantityLimit;
    if (brochure != null) {
      map['brochureConfig'] = brochure?.toJson();
    }
    map['mpl_terms_and_conditions'] = mplTermsAndConditions;
    map['mpl_insurance_rules'] = mplInsuranceRules;
    if (landingPageUserGuides != null) {
      map['landing_page_user_guide'] = landingPageUserGuides?.map((v) => v.toJson()).toList();
    }
    map['social_facebook_guide'] = socialFacebookGuide;
    map['landing_page_banner'] = landingPageBanner;
    if (landingPageUserGuides != null) {
      map['order_knowledge'] = orderKnowLedges?.map((v) => v.toJson()).toList();
    }
    return map;
  }

  bool get enabledMPLPayLater => (mplQuantityLimit ?? 0) > 0;
}
