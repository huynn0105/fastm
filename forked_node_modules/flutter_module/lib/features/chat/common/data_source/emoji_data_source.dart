import 'package:emojis/emoji.dart';
import 'package:flutter/material.dart';
import 'package:flutter_module/models/chat/icon/emoji_model.dart';

class EmojiDataSource {
  EmojiDataSource._();

  static List<Emoji> get _src {
    return Emoji.byGroup(EmojiGroup.smileysEmotion).where((e) => Emoji.disassemble(e.toString()).length == 1).toList();
  }

  static List<EmojiModel> get _emoji => _src.map((e) => EmojiModel(code: e.char)).toList();

  static Map<String, List<EmojiModel>> get data => {'emoji': _emoji};

  static bool hasEmoji(String? emoji) {
    return _src.any((e) => e.char == emoji);
  }

  static List<String> parseEmoji(String text) {
    if (text.isEmpty) return [];

    List<String> result = <String>[];
    for (final character in text.characters) {
      if (hasEmoji(character)) {
        result.add(character);
      }
    }
    return result;
  }
}
