import 'package:flutter_module/common/extension/duration_extension.dart';
import 'package:just_audio/just_audio.dart';

class AudioPlayerData {
  const AudioPlayerData({
    this.id,
    this.samples = const [],
    this.duration = const AudioPlayerProgressDuration(),
    this.button = AudioPlayerButtonStatus.paused,
    this.processingState = ProcessingState.idle,
  });

  final String? id;
  final List<double> samples;
  final AudioPlayerProgressDuration duration;
  final AudioPlayerButtonStatus button;
  final ProcessingState processingState;

  AudioPlayerData copyWith({
    String? id,
    List<double>? samples,
    AudioPlayerProgressDuration? duration,
    AudioPlayerButtonStatus? button,
    ProcessingState? processingState,
  }) {
    return AudioPlayerData(
      id: id ?? this.id,
      samples: samples ?? this.samples,
      duration: duration ?? this.duration,
      button: button ?? this.button,
      processingState: processingState ?? this.processingState,
    );
  }
}

enum AudioPlayerButtonStatus { paused, playing, loading }

class AudioPlayerProgressDuration {
  const AudioPlayerProgressDuration({
    this.current = Duration.zero,
    this.buffer = Duration.zero,
    this.total = const Duration(milliseconds: 1),
  });

  final Duration current;
  final Duration buffer;
  final Duration total;

  AudioPlayerProgressDuration copyWith({
    Duration? current,
    Duration? buffer,
    Duration? total,
  }) {
    return AudioPlayerProgressDuration(
      current: current ?? this.current,
      buffer: buffer ?? this.buffer,
      total: total ?? this.total,
    );
  }

  String getTotalDuration() {
    return total.getMMss();
  }

  String getCurrentDuration() {
    return current.getMMss();
  }
}
