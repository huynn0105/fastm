import 'package:bloc/bloc.dart';
import 'package:equatable/equatable.dart';
import 'package:flutter_module/common/bloc_status.dart';
import 'package:flutter_module/common/extension/list_extension.dart';
import 'package:flutter_module/features/chat/common/data_source/emoji_data_source.dart';
import 'package:flutter_module/features/chat/common/data_source/sticker_data_source.dart';
import 'package:flutter_module/models/chat/icon/icon_model.dart';

part 'device_icon_state.dart';

class DeviceIconCubit extends Cubit<DeviceIconState> {
  DeviceIconCubit() : super(const DeviceIconState());

  fetchData() async {
    Map<String, List<IconModel>> result = {
      ...EmojiDataSource.data,
      ...StickerDataSource.data,
    };
    emit(state.copyWith(
      status: BlocStatus.success,
      data: result,
      selectedGroup: result.keys.toList().getFirst(),
    ));
  }

  selectGroup(String code) {
    emit(state.copyWith(
      selectedGroup: code,
    ));
  }

  selectEmoji(String code) {
    emit(state.copyWith(
      selectedEmojis: [...state.selectedEmojis, code],
    ));
  }

  removeLastEmoji() {
    emit(state.copyWith(
      selectedEmojis: [...state.selectedEmojis]..removeLast(),
    ));
  }
}
