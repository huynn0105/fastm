import 'package:flutter/material.dart';

class MessageLayout extends StatelessWidget {
  const MessageLayout({
    super.key,
    required this.child,
    this.top = const Offstage(),
    this.bottom = const Offstage(),
    this.left = const Offstage(),
    this.right = const Offstage(),
  });

  final Widget child;
  final Widget top;
  final Widget bottom;
  final Widget left;
  final Widget right;

  @override
  Widget build(BuildContext context) {
    return Table(
      columnWidths: const {
        0: IntrinsicColumnWidth(),
        1: IntrinsicColumnWidth(),
        2: IntrinsicColumnWidth(),
      },
      children: [
        TableRow(
          children: [
            const TableCell(child: Offstage()),
            TableCell(child: top),
            const TableCell(child: Offstage()),
          ],
        ),
        TableRow(
          children: [
            TableCell(child: left),
            TableCell(child: child),
            TableCell(child: right),
          ],
        ),
        TableRow(
          children: [
            const TableCell(child: Offstage()),
            TableCell(child: bottom),
            const TableCell(child: Offstage()),
          ],
        ),
      ],
    );
  }
}

class MessageRow extends Row {
  MessageRow({
    super.key,
    required bool isMe,
    super.crossAxisAlignment,
    super.textDirection,
    super.verticalDirection,
    super.textBaseline,
    super.children,
    super.mainAxisSize = MainAxisSize.min,
  }) : super(mainAxisAlignment: isMe ? MainAxisAlignment.end : MainAxisAlignment.start);
}

class MessageColumn extends Column {
  MessageColumn({
    super.key,
    required bool isMe,
    super.textDirection,
    super.verticalDirection,
    super.textBaseline,
    super.children,
    super.mainAxisSize = MainAxisSize.min,
    super.mainAxisAlignment = MainAxisAlignment.start,
  }) : super(crossAxisAlignment: isMe ? CrossAxisAlignment.end : CrossAxisAlignment.start);
}
