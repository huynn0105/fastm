import 'package:flutter/material.dart';
import 'package:flutter_module/common/widgets/separated_widget.dart';
import 'package:flutter_module/features/chat/page/thread_messages/inheritance/message_action_provider.dart';
import 'package:flutter_module/features/chat/page/thread_messages/widgets/reaction_widget.dart';
import 'package:flutter_module/models/chat/message/message_wrapper_model.dart';

class ReactionSelectionComponent extends StatelessWidget {
  const ReactionSelectionComponent({
    super.key,
    required this.data,
  });

  final MessageWrapperModel data;

  @override
  Widget build(BuildContext context) {
    final reactions = data.message?.getReactions() ?? [];
    return SeparatedRow(
      mainAxisSize: MainAxisSize.min,
      separatorBuilder: (_, __) => const SizedBox(width: 1),
      children: List.generate(
        reactions.length,
        (index) {
          return ReactionWidget(
            data: reactions[index],
            onTap: () {
              MessageActionProvider.of(context).onReactionMessageTap(
                context,
                data.message!,
                reactions,
              );
            },
          );
        },
      ),
    );
  }
}
