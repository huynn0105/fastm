import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:flutter_module/common/constants.dart';
import 'package:flutter_module/features/chat/cubit/chat_contact_online/chat_contact_online_cubit.dart';
import 'package:flutter_module/features/chat/page/chat/children/thread/items/add_contact_item.dart';
import 'package:flutter_module/features/chat/page/chat/children/thread/items/contact_online_item.dart';

class ContactsOnlineComponent extends StatelessWidget {
  const ContactsOnlineComponent({super.key});

  @override
  Widget build(BuildContext context) {
    return Container(
      margin: const EdgeInsets.only(top: 20),
      height: 80,
      child: BlocBuilder<ChatContactOnlineCubit, ChatContactOnlineState>(
        builder: (context, state) {
          return ListView.builder(
            physics: AppConstants.physics,
            padding: const EdgeInsets.symmetric(
              horizontal: 16,
            ),
            scrollDirection: Axis.horizontal,
            itemBuilder: (context, index) {
              if (index == 0) {
                return const AddContactItem();
              }

              final item = state.contactsOnline[index - 1];
              return const ContactOnlineItem();
            },
            itemCount: state.contactsOnline.length + 1,
          );
        },
      ),
    );
  }
}
