import 'package:auto_route/auto_route.dart';
import 'package:flutter/material.dart';
import 'package:flutter_module/common/bottom_sheet/bottom_sheet_provider.dart';
import 'package:flutter_module/common/colors.dart';
import 'package:flutter_module/common/constants.dart';
import 'package:flutter_module/common/styles.dart';
import 'package:flutter_module/common/widgets/images.dart';
import 'package:flutter_module/features/chat/page/general_media/chat_general_media_page.dart';
import 'package:flutter_module/features/chat/page/general_media/items/chat_general_link_item.dart';
import 'package:flutter_module/features/chat/page/preview_image/components/components/header_preview_component.dart';

@RoutePage()
class ChatGeneralLinkPage extends StatelessWidget {
  const ChatGeneralLinkPage({super.key});

  @override
  Widget build(BuildContext context) {
    List<GeneralMedia> listMedia = [];
    listMedia.add(
      const GeneralMedia(
        id: '1',
        link: '',
        thumbnail:
            'https://khoinguonsangtao.vn/wp-content/uploads/2022/09/hinh-ve-don-gian-cute-dang-yeu-va-de-thuc-hien.jpg',
        type: 'VIDEO',
      ),
    );
    listMedia.add(
      const GeneralMedia(
        id: '2',
        link: '',
        thumbnail: 'https://toigingiuvedep.vn/wp-content/uploads/2021/07/hinh-ve-don-gian-va-de-thuong-nhat.jpg',
        type: 'VIDEO',
      ),
    );
    listMedia.add(
      const GeneralMedia(
        id: '3',
        link: '',
        thumbnail: 'https://images2.thanhnien.vn/Uploaded/nhutnq/2022_10_02/220928180903-03-dall-e-ai-2189.jpg',
        type: 'VIDEO',
      ),
    );
    listMedia.add(
      const GeneralMedia(
        id: '4',
        link: '',
        thumbnail: 'https://vapa.vn/wp-content/uploads/2022/12/hinh-nen-dep-cho-facebook-001.jpg',
        type: 'VIDEO',
      ),
    );
    listMedia.add(
      const GeneralMedia(
        id: '5',
        link: '',
        thumbnail:
            'https://toigingiuvedep.vn/wp-content/uploads/2021/07/hinh-ve-don-gian-sieu-cute-sieu-de-thuong-1-820x574.jpg',
        type: 'VIDEO',
      ),
    );

    return ListView.builder(
      physics: AppConstants.physics,
      padding: const EdgeInsets.symmetric(
        horizontal: 16,
      ),
      itemCount: listMedia.length,
      itemBuilder: (context, index) {
        final item = listMedia[index];
        return ChatGeneralLinkItem(
            item: item,
            onTap: () {
              _showActionSheet(context);
            });
      },
    );
  }

  void _showActionSheet(BuildContext context) {
    List<PreviewMediaOption> listOptions = [
      const PreviewMediaOption(
        title: 'Chia sẻ',
        icon: 'ic_share_bold',
      ),
      const PreviewMediaOption(
        title: 'Sao chép',
        icon: 'ic_mtrade_copy',
      ),
      const PreviewMediaOption(
        title: 'Mở link',
        icon: 'ic_website',
      ),
      const PreviewMediaOption(
        title: 'Xóa link',
        icon: 'ic_trash',
      ),
    ];

    BottomSheetProvider.instance.show(
      context,
      title: "Tùy chọn",
      child: ListView.separated(
        padding: const EdgeInsets.only(
          top: 16,
          bottom: 26,
        ),
        shrinkWrap: true,
        itemBuilder: (context, index) {
          final item = listOptions[index];
          return Row(
            children: [
              const SizedBox(
                width: 16,
              ),
              AppImage.asset(
                asset: item.icon,
                width: 32,
                height: 32,
              ),
              const SizedBox(
                width: 16,
              ),
              Expanded(
                child: Text(
                  item.title ?? '',
                  style: UITextStyle.semiBold.copyWith(
                    fontSize: 18,
                    color: UIColors.boolText,
                  ),
                ),
              ),
              const AppImage.asset(
                asset: 'ic_arrow_right',
                width: 24,
                height: 24,
              ),
              const SizedBox(
                width: 16,
              ),
            ],
          );
        },
        separatorBuilder: (context, index) {
          return const Column(
            children: [
              SizedBox(
                height: 16,
              ),
              Divider(
                color: UIColors.lightGray,
                endIndent: 16,
                indent: 64,
                height: 1,
                thickness: 1,
              ),
              SizedBox(
                height: 12,
              ),
            ],
          );
        },
        itemCount: listOptions.length,
      ),
    );
  }
}
