part of '../time_checking_history_page.dart';

class _AppBar extends StatelessWidget {
  const _AppBar({
    super.key,
  });

  @override
  Widget build(BuildContext context) {
    return Stack(
      children: [
        Align(
          alignment: Alignment.centerLeft,
          child: AppSplashButton(
            onTap: context.router.pop,
            padding: const EdgeInsets.only(left: 16),
            child: const AppImage.asset(
              asset: "ic_circle_left",
              width: 36,
              height: 36,
            ),
          ),
        ),
        Align(
          alignment: Alignment.center,
          child: Column(
            children: [
              Row(
                mainAxisSize: MainAxisSize.min,
                children: [
                  AppSplashButton(
                    onTap: () {
                      context.read<TimeCheckingHistoryCubit>().onPrevMonth();
                    },
                    child: const AppImage.asset(
                      asset: "ic_arrow_left",
                      width: 24,
                      height: 24,
                      color: UIColors.white,
                    ),
                  ),
                  const SizedBox(width: 16),
                  BlocBuilder<TimeCheckingHistoryCubit, TimeCheckingHistoryState>(
                    builder: (context, state) {
                      return Text(
                        DateFormat('MM/yyyy').format(state.dateTime),
                        style: UITextStyle.semiBold.copyWith(color: UIColors.white, fontSize: 16),
                      );
                    },
                  ),
                  const SizedBox(width: 16),
                  BlocBuilder<TimeCheckingHistoryCubit, TimeCheckingHistoryState>(
                    builder: (context, state) {
                      final now = DateTime.now();
                      return Visibility(
                        visible: state.dateTime.toMonth().compareTo(now.toMonth()) < 0,
                        replacement: const SizedBox(width: 24),
                        child: AppSplashButton(
                          onTap: () {
                            context.read<TimeCheckingHistoryCubit>().onNextMonth();
                          },
                          child: const AppImage.asset(
                            asset: "ic_arrow_right",
                            width: 24,
                            height: 24,
                            color: UIColors.white,
                          ),
                        ),
                      );
                    },
                  ),
                ],
              ),
              const SizedBox(height: 4),
              Text(
                'Báo cáo hằng ngày',
                style: UITextStyle.medium.copyWith(color: UIColors.white, fontSize: 16),
              ),
              const SizedBox(height: 12),
            ],
          ),
        ),
      ],
    );
  }
}
