import 'package:auto_route/auto_route.dart';
import 'package:flutter/material.dart';
import 'package:flutter_module/app_data.dart';
import 'package:flutter_module/common/bottom_sheet/bottom_sheet_provider.dart';
import 'package:flutter_module/common/global_function.dart';
import 'package:flutter_module/features/legendary/pages/legendary/components/collaborator_hier_referal_component.dart';
import 'package:flutter_module/features/legendary/pages/legendary/items/collaborator_info_item.dart';
import 'package:flutter_module/models/mfast/legendary/hier_user_model.dart';
import 'package:flutter_module/routes/routes.gr.dart';

class CollaboratorInfoComponent extends StatelessWidget {
  const CollaboratorInfoComponent({
    super.key,
    required this.collaboratorID,
    required this.collaboratorPhone,
    required this.level,
    required this.referalUsers,
  });

  final String collaboratorID;
  final String collaboratorPhone;
  final int level;
  final List<HierUserModel> referalUsers;

  @override
  Widget build(BuildContext context) {
    return Row(
      mainAxisAlignment: MainAxisAlignment.center,
      children: [
        CollaboratorInfoItem(
          title: 'Tầng $level',
          asset: 'ic_legendary_hier_tree',
          onTap: () {
            BottomSheetProvider.instance.show(
              context,
              title: 'Chi tiết tầng CTV',
              child: CollaboratorHierReferalComponent(
                userID: AppData.instance.userID,
                collaboratorID: collaboratorID,
                data: referalUsers,
              ),
            );
          },
        ),
        const SizedBox(
          width: 24,
        ),
        CollaboratorInfoItem(
          title: 'Chat',
          asset: 'ic_chat_outline',
          onTap: () {
            context.pushRoute(ChatRoute(chatUserID: collaboratorID));
          },
        ),
        const SizedBox(
          width: 24,
        ),
        CollaboratorInfoItem(
          title: 'Gọi',
          asset: 'ic_call_outline',
          onTap: () {
            GlobalFunction.launchPhone(collaboratorPhone);
          },
        ),
      ],
    );
  }
}
