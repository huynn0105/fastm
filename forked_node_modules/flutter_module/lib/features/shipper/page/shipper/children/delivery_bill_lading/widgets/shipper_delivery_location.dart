import 'package:flutter/material.dart';
import 'package:flutter_module/features/shipper/page/shipper/children/delivery_bill_lading/widgets/shipper_delivery_distance_painter.dart';

import '../../../../../../../common/colors.dart';
import '../../../../../../../common/enum/shipper/delivery_status.dart';
import '../../../../../../../common/styles.dart';
import '../../../../../../../common/utils/format_util.dart';
import '../../../../../../../common/widgets/images.dart';

class ShipperDeliveryLocation extends StatelessWidget {
  const ShipperDeliveryLocation({
    Key? key,
    required this.isFirst,
    this.distance,
    this.time,
    this.lat,
    this.lng,
    this.deliveryCode,
  }) : super(key: key);

  final bool isFirst;
  final double? distance;
  final int? time;
  final String? lat;
  final String? lng;
  final String? deliveryCode;
  @override
  Widget build(BuildContext context) {
    return CustomPaint(
      painter: DistancePainter(
        backgroundColor: _getBackground(),
      ),
      child: Container(
        height: 28,
        alignment: Alignment.centerLeft,
        padding: const EdgeInsets.only(left: 26, right: 16),
        child: Row(
          children: [
            RichText(
              text: TextSpan(
                text: "${time ?? "---"} ph√∫t",
                style: UITextStyle.regular.copyWith(
                  fontSize: 14,
                ),
                children: [
                  TextSpan(
                    text: " - ",
                    style: UITextStyle.semiBold.copyWith(
                      color: UIColors.grayText,
                    ),
                  ),
                  TextSpan(
                    text: "${distance == null ? "---" : FormatUtil.currencyDoubleFormat(distance, showUnit: false)}Km",
                    style: UITextStyle.semiBold.copyWith(
                      color: UIColors.primaryColor,
                    ),
                  ),
                ],
              ),
            ),
            const SizedBox(
              width: 4,
            ),
            const AppImage.asset(
              asset: "ic_arrow_right",
              width: 20,
              height: 20,
              color: UIColors.primaryColor,
            ),
          ],
        ),
      ),
    );
  }

  _getBackground() {
    if (deliveryCode == DeliveryStatus.DELAY.name) {
      return UIColors.lightSecondaryColor;
    } else if (deliveryCode == DeliveryStatus.DELIVERY_FAILURE.name) {
      return UIColors.lightRed;
    } else {
      return UIColors.lightBlue;
    }
  }
}