import 'package:auto_route/auto_route.dart';
import 'package:flutter/material.dart';
import '../../../../../../../common/enum/shipper/delivery_status.dart';
import '../../../../../../../common/utils/datetime_util.dart';
import '../../../../../../../models/shipper/bill_lading/shipper_bill_lading_model.dart';
import '../../../../../../../common/colors.dart';
import '../../../../../../../common/styles.dart';
import '../../../../../../../common/widgets/buttons.dart';
import '../../../../../../../routes/routes.gr.dart';
import '../../../widgets/shipper_bill_lading_code_widget.dart';
import '../widgets/shipper_bill_lading_status_widget.dart';
import '../../../widgets/shipper_address_widget.dart';
import '../../../widgets/shipper_customer_widget.dart';

import '../../../widgets/shipper_location_widget.dart';

class ShipperCompletedBillLadingItem extends StatelessWidget {
  const ShipperCompletedBillLadingItem({
    Key? key,
    required this.index,
    required this.data,
  }) : super(key: key);

  final int index;
  final ShipperBillLadingModel data;

  @override
  Widget build(BuildContext context) {
    final deliveryCode = data.masterDeliveryStatus?.code ?? "";
    return AppSplashButton(
      onTap: () {
        context.pushRoute(ShipperBillLadingDetailRoute(orderCode: data.orderCode ?? ""));
      },
      child: Container(
        height: 120,
        alignment: Alignment.center,
        padding: const EdgeInsets.symmetric(vertical: 10, horizontal: 16),
        decoration: const BoxDecoration(
          color: UIColors.white,
        ),
        child: Row(
          children: [
            ShipperLocationWidget(
              distance: data.customer?.distance,
            ),
            const SizedBox(
              width: 16,
            ),
            Expanded(
              child: Column(
                mainAxisAlignment: MainAxisAlignment.start,
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  Row(
                    mainAxisAlignment: MainAxisAlignment.spaceBetween,
                    children: [
                      Text(
                        "Mã vận đơn:",
                        style: UITextStyle.regular.copyWith(
                          fontSize: 13,
                          color: UIColors.grayText,
                        ),
                      ),
                      if (deliveryCode == DeliveryStatus.SUCCEED.name)
                        const ShipperBillLadingStatusWidget.success()
                      else if (deliveryCode == DeliveryStatus.DELIVERY_FAILURE.name ||
                          deliveryCode == DeliveryStatus.CANCEL.name)
                        const ShipperBillLadingStatusWidget.failure(),
                    ],
                  ),
                  Row(
                    mainAxisSize: MainAxisSize.min,
                    children: [
                      ShipperBillLadingCodeWidget(
                        orderCode: data.orderCode ?? "",
                        deliveryCode: data.orderDeliveryCode ?? "",
                      ),
                      const Spacer(),
                      Text(
                        DateTimeUtil.convertDate(
                          data.updated ?? "",
                          fromFormat: DateTimeFormat.yyyy_MM_ddTHH_mm_ssSS,
                          toFormat: DateTimeFormat.HH_mm_dd_MM_yyyy,
                          isFromUtc: true,
                        ),
                        style: UITextStyle.regular.copyWith(
                          fontSize: 13,
                          color: UIColors.grayText,
                        ),
                      ),
                    ],
                  ),
                  const SizedBox(
                    height: 5,
                  ),
                  ShipperAddressWidget(
                    address: data.customer?.addressDelivery ?? "",
                    longitude: data.customer?.longitude,
                    latitude: data.customer?.latitude,
                  ),
                  const SizedBox(
                    height: 5,
                  ),
                  ShipperCustomerWidget(
                    fullname: data.customer?.name ?? "",
                  ),
                ],
              ),
            ),
          ],
        ),
      ),
    );
  }
}
