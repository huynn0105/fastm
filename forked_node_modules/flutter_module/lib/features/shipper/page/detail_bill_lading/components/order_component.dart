import 'package:flutter/material.dart';
import 'package:flutter_module/common/enum/shipper/delivery_status.dart';
import 'package:flutter_module/features/shipper/page/detail_bill_lading/components/opod_help_text_component.dart';
import '../../../../../common/styles.dart';

import '../../../../../common/colors.dart';
import '../../../../../common/widgets/divider.dart';
import '../../../../../models/shipper/order/shipper_detail_order_model.dart';
import '../../shipper/children/completed_bill_lading/widgets/shipper_bill_lading_status_widget.dart';
import '../items/customer_information_item.dart';
import 'detail_order_component.dart';

class OrderComponent extends StatelessWidget {
  const OrderComponent({
    Key? key,
    this.data,
    this.showDetail = false,
    this.showToggleBtn = true,
  }) : super(key: key);
  final DeliveryModel? data;
  final bool showDetail;
  final bool showToggleBtn;

  @override
  Widget build(BuildContext context) {
    String deliveryCode = data?.orderDetail?.masterDeliveryStatus?.code ?? '';
    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Row(
          children: [
            Text(
              "Người nhận",
              style: UITextStyle.medium.copyWith(
                fontSize: 14,
                color: UIColors.grayText,
              ),
            ),
            const Spacer(),
            if (deliveryCode == DeliveryStatus.SUCCEED.name) const ShipperBillLadingStatusWidget.success(),
            if (deliveryCode == DeliveryStatus.DELIVERY_FAILURE.name) const ShipperBillLadingStatusWidget.failure(),
          ],
        ),
        const SizedBox(
          height: 14,
        ),
        Container(
          padding: const EdgeInsets.fromLTRB(16, 0, 16, 16),
          decoration: BoxDecoration(
            color: UIColors.white,
            borderRadius: BorderRadius.circular(12),
          ),
          child: Column(
            children: [
              CustomerInformationItem(
                data: data,
              ),
              if (data?.orderDetail?.isPaymentOnDelivery() == true)
                Padding(
                  padding: const EdgeInsets.only(top: 12, bottom: 16),
                  child: OPODHelpTextComponent(paymentTypeCode: data?.orderDetail?.paymentMethod?.code ?? ''),
                )
              else
                const DottedDivider(
                  height: 12,
                ),
              DetailOrderComponent(
                data: data,
                showDetail: showDetail,
                showToggleBtn: showToggleBtn,
              ),
            ],
          ),
        ),
      ],
    );
  }
}
