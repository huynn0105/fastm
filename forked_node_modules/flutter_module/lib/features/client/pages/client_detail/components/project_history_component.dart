import 'package:flutter/material.dart';
import 'package:flutter_module/common/bottom_sheet/bottom_sheet_provider.dart';
import 'package:flutter_module/features/client/pages/client_detail/components/detail_project_component.dart';
import 'package:flutter_module/features/client/pages/client_detail/items/project_history_item.dart';
import 'package:flutter_module/models/client/client_detail/client_project_model.dart';

import '../../../../../../../common/colors.dart';
import '../../../../../../../common/styles.dart';

class ProjectHistoryComponent extends StatelessWidget {
  const ProjectHistoryComponent({
    Key? key,
    required this.data,
  }) : super(key: key);

  final List<ClientProjectModel> data;

  @override
  Widget build(BuildContext context) {
    return Column(
      mainAxisSize: MainAxisSize.min,
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Text(
          "Lịch sử tham gia",
          style: UITextStyle.regular.copyWith(
            color: UIColors.grayText,
          ),
        ),
        const SizedBox(
          height: 8,
        ),
        ListView.separated(
          shrinkWrap: true,
          padding: EdgeInsets.zero,
          physics: const NeverScrollableScrollPhysics(),
          itemBuilder: (context, index) {
            return ProjectHistoryItem(
              data: data[index],
              onTap: () {
                _onTapItem(context, item: data[index]);
              },
            );
          },
          separatorBuilder: (_, __) => const Divider(
            height: 20,
            indent: 56,
          ),
          itemCount: data.length,
        ),
      ],
    );
  }

  _onTapItem(BuildContext context, {required ClientProjectModel item}) {
    BottomSheetProvider.instance.show(
      context,
      title: item.projectName ?? "Dự án",
      child: DetailProjectComponent(item: item),
    );
  }
}
