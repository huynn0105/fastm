import 'package:auto_route/auto_route.dart';
import 'package:ekyc/common/widgets/buttons.dart';
import 'package:flutter/material.dart';
import 'package:flutter_module/common/colors.dart';
import 'package:flutter_module/common/styles.dart';
import 'package:flutter_module/common/utils/datetime_util.dart';
import 'package:flutter_module/common/utils/deeplink_util.dart';
import 'package:flutter_module/common/utils/text_util.dart';
import 'package:flutter_module/common/widgets/images.dart';
import 'package:flutter_module/models/client/client_detail/client_project_waiting_model.dart';
import 'package:flutter_module/routes/routes.gr.dart';

class ProjectWaitingHistoryItem extends StatelessWidget {
  const ProjectWaitingHistoryItem({
    super.key,
    required this.data,
  });

  final ClientProjectWaitingModel data;

  @override
  Widget build(BuildContext context) {
    String createdAt = data.createdAt ?? '';
    String demandText = data.demandText ?? '';
    String demandType = data.demandType ?? '';
    String creditsSuitableText = data.creditsSuitableText ?? '';

    ///
    return SplashButton(
      onTap: () => _onTap(context),
      child: Container(
        padding: const EdgeInsets.all(12),
        decoration: BoxDecoration(
          color: UIColors.darkBlue,
          borderRadius: BorderRadius.circular(8),
        ),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Row(
              children: [
                Expanded(
                  child: Text(
                    demandType,
                    style: UITextStyle.semiBold.copyWith(
                      fontSize: 14,
                      color: UIColors.secondaryColor,
                    ),
                    maxLines: 1,
                    overflow: TextOverflow.ellipsis,
                  ),
                ),
                if (createdAt.isNotEmpty) ...[
                  Text(
                    DateTimeUtil.getNumberDayBetween(createdAt),
                    style: UITextStyle.regular.copyWith(
                      fontSize: 12,
                      color: UIColors.lightBlue,
                    ),
                  ),
                ],
                const AppImage.asset(
                  asset: 'ic_arrow_right',
                  width: 18,
                  height: 18,
                  fit: BoxFit.contain,
                  color: UIColors.white,
                ),
              ],
            ),
            Text(
              demandText,
              style: UITextStyle.regular.copyWith(
                fontSize: 14,
                color: UIColors.white,
              ),
            ),
            if (creditsSuitableText.isNotEmpty) ...[
              const SizedBox(
                height: 4,
              ),
              Text(
                'Hồ sơ có thể cung cấp',
                style: UITextStyle.semiBold.copyWith(
                  fontSize: 14,
                  color: UIColors.secondaryColor,
                ),
              ),
              Text(
                creditsSuitableText,
                style: UITextStyle.regular.copyWith(
                  fontSize: 14,
                  color: UIColors.white,
                ),
              ),
            ],
          ],
        ),
      ),
    );
  }

  _onTap(BuildContext context) {
    DeepLinkUtil.open(data.urlDetail, title: data.urlTitle);
  }
}
