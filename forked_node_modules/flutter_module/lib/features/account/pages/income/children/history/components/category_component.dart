import 'package:flutter/material.dart';
import 'package:flutter_module/common/enum/income/history_income_type.dart';
import 'package:flutter_module/common/widgets/buttons.dart';
import 'package:scroll_to_index/scroll_to_index.dart';

import '../../../../../../../common/colors.dart';
import '../../../../../../../common/styles.dart';

class CategoryComponent extends StatelessWidget {
  const CategoryComponent({
    Key? key,
    required this.type,
    required this.onTypeChanged,
    required this.autoScrollController,
  }) : super(key: key);

  final HistoryIncomeType type;
  final Function(HistoryIncomeType) onTypeChanged;
  final AutoScrollController autoScrollController;

  @override
  Widget build(BuildContext context) {
    return SliverToBoxAdapter(
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          Text(
            "Lịch sử giao dịch",
            style: UITextStyle.semiBold.copyWith(
              color: UIColors.grayText,
            ),
          ),
          const SizedBox(
            height: 10,
          ),
          SizedBox(
            height: 35,
            child: ListView.separated(
              controller: autoScrollController,
              scrollDirection: Axis.horizontal,
              itemBuilder: (BuildContext context, int index) {
                final item = data[index];
                final isSelected = item.code == type.code;
                final textColor = isSelected ? UIColors.white : UIColors.grayText;
                final bgColor = isSelected ? UIColors.primaryColor : UIColors.white;
                return AppSplashButton(
                  onTap: () => onTypeChanged(item),
                  child: AutoScrollTag(
                    index: index,
                    key: ValueKey(index),
                    controller: autoScrollController,
                    child: Chip(
                      label: Text(
                        item.title,
                        style: UITextStyle.regular.copyWith(
                          color: textColor,
                        ),
                      ),
                      backgroundColor: bgColor,
                    ),
                  ),
                );
              },
              itemCount: data.length,
              separatorBuilder: (_, __) => const SizedBox(
                width: 10,
              ),
            ),
          ),
        ],
      ),
    );
  }

  List<HistoryIncomeType> get data => HistoryIncomeType.values;
}
