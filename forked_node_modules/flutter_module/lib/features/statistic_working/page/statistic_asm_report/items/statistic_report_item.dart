import 'package:flutter/material.dart';
import 'package:flutter_module/features/statistic_working/page/statistic_working/widget/sale_info_widget.dart';
import 'package:info_popup/info_popup.dart';

import '../../../../../common/enum/statistic_working/statistic_working_type.dart';
import '../../../../../models/statistic_working/statistic_report_model.dart';
import '../components/report_info_popup.dart';
import '../components/statistic_report_summary_value_component.dart';

class StatisticReportItem extends StatelessWidget {
  const StatisticReportItem({
    super.key,
    this.item,
    this.isReported = true,
    this.onTap,
    this.onControllerCreated,
  });

  final StatisticReportModel? item;
  final bool isReported;
  final OnControllerCreated? onControllerCreated;
  final Function()? onTap;

  @override
  Widget build(BuildContext context) {
    Widget widget = SaleInfoWidget(
      userID: '${item?.userID}',
      fullName: item?.fullName ?? '',
      avatarURL: item?.image ?? '',
      phoneNumber: item?.mobilePhone ?? '',
      lineLabel: item?.level ?? '',
      statisticType: StatisticWorkingType.report.code,
      lastestActionTime: isReported ? null : item?.lastReport,
      footer: StatisticReportSummaryValueComponent(details: item?.reportDetails),
      onTap: onTap,
    );
    if (onControllerCreated != null) {
      return ReportInfoPopup(
        onControllerCreated: onControllerCreated,
        child: widget,
      );
    }
    return widget;
  }
}
