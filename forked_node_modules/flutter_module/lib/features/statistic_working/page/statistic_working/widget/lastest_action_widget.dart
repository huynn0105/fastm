import 'package:collection/collection.dart';
import 'package:flutter_module/common/colors.dart';
import 'package:flutter_module/common/enum/statistic_working/statistic_working_type.dart';
import 'package:flutter_module/common/styles.dart';
import 'package:flutter_module/common/utils/datetime_util.dart';
import 'package:flutter_module/common/widgets/images.dart';
import 'package:flutter/material.dart';

class LastestActionWidget extends StatelessWidget {
  const LastestActionWidget({
    super.key,
    required this.statisticType,
    required this.date,
    this.color = UIColors.white,
  });

  final String statisticType;
  final String date;
  final Color color;

  @override
  Widget build(BuildContext context) {
    final title = switch (StatisticWorkingType.values.firstWhereOrNull((e) => e.code == statisticType)) {
      StatisticWorkingType.checking => 'Điểm danh gần nhất',
      StatisticWorkingType.report => 'Tự khai gần nhất',
      _ => '',
    };
    final timeAgo = DateTimeUtil.getNumberDayBetween(date);

    ///
    return Row(
      mainAxisSize: MainAxisSize.min,
      children: [
        AppImage.asset(
          asset: 'ic_time_outline',
          width: 16,
          height: 16,
          color: color,
          fit: BoxFit.contain,
        ),
        const SizedBox(
          width: 4,
        ),
        Flexible(
          child: Text(
            [title, timeAgo].join(': '),
            style: UITextStyle.regular.copyWith(
              fontSize: 13,
              color: color,
            ),
          ),
        ),
      ],
    );
  }
}
