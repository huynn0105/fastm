import 'package:auto_route/auto_route.dart';
import 'package:flutter/material.dart';
import 'package:flutter_module/common/colors.dart';
import 'package:flutter_module/common/styles.dart';
import 'package:flutter_module/common/widgets/buttons.dart';
import 'package:flutter_module/features/mtrade/page/mtrade/widgets/mtrade_text_field.dart';

class HomeSearchAppBarComponent extends AppBar {
  HomeSearchAppBarComponent({
    super.key,
    required BuildContext context,
    required TextEditingController searchController,
    required Function(String) onSearchChanged,
  }) : super(
          titleSpacing: 0,
          leadingWidth: 0,
          automaticallyImplyLeading: false,
          title: Row(
            children: [
              const SizedBox(
                width: 16,
              ),
              Expanded(
                child: Container(
                  height: 40,
                  clipBehavior: Clip.hardEdge,
                  decoration: BoxDecoration(
                    borderRadius: BorderRadius.circular(25),
                  ),
                  child: ValueListenableBuilder(
                      valueListenable: searchController,
                      builder: (context, value, child) {
                        return MTradeSearchTextField(
                          controller: searchController,
                          onChanged: onSearchChanged,
                          onCleared: () => onSearchChanged(''),
                          hintText: 'Tìm kiếm',
                          borderColor: UIColors.white.withOpacity(0.3),
                          fillColor: UIColors.white.withOpacity(0.3),
                          textColor: UIColors.white,
                          hintColor: UIColors.white,
                          iconColor: UIColors.white,
                          showInputBorder: false,
                          showClearButton: value.text.isNotEmpty,
                        );
                      }),
                ),
              ),
              AppSplashButton(
                onTap: context.router.pop,
                child: Container(
                  padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 12),
                  child: Text(
                    'Đóng',
                    style: UITextStyle.regular.copyWith(
                      fontSize: 14,
                      color: UIColors.white,
                    ),
                  ),
                ),
              ),
            ],
          ),
          flexibleSpace: Container(
            decoration: const BoxDecoration(
              gradient: LinearGradient(
                begin: Alignment(0.5, -0.5),
                end: Alignment(-0.5, 0.5),
                colors: UIColors.primaryGradient,
              ),
            ),
          ),
        );
}
