import 'package:bloc/bloc.dart';
import 'package:equatable/equatable.dart';
import 'package:flutter_module/common/bloc_status.dart';
import 'package:flutter_module/common/enum/mtrade/tracking_event.dart';
import 'package:flutter_module/features/mtrade/repository/mtrade_product_repository.dart';
import 'package:flutter_module/services/api/mtrade/payload/mtrade_event_personal_website_statistic_payload.dart';

part 'mtrade_tracking_event_state.dart';

class MTradeTrackingEventCubit extends Cubit<MTradeTrackingEventState> {
  MTradeTrackingEventCubit() : super(const MTradeTrackingEventState());

  final MTradeProductRepository _repository = MTradeProductRepository();

  trackLandingPage(List<LandingPageTrackingAction> actions) async {
    await _repository.sendEventPersonalWebsiteStatistic(
      payload: MTradeEventPersonalWebsiteStatisticPayload(
        action: actions.map((e) => e.name).toList(),
      ),
    );
  }
}
