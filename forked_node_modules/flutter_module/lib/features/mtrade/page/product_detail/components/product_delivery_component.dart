import 'package:flutter/material.dart';
import 'package:flutter_module/common/enum/mtrade/product_delivery_type.dart';
import 'package:flutter_module/common/styles.dart';
import 'package:flutter_module/common/utils/text_util.dart';
import 'package:flutter_module/features/mtrade/page/product_detail/items/delivery_item.dart';
import 'package:flutter_module/models/mtrade/product_detail/product_delivery_model.dart';
import '../../../../../common/widgets/images.dart';
import '../../../../../common/colors.dart';

class ProductDeliveryComponent extends StatelessWidget {
  const ProductDeliveryComponent({
    Key? key,
    required this.productDelivery,
    required this.payOnDelivery,
  }) : super(key: key);

  final ProductDeliveryModel? productDelivery;
  final bool payOnDelivery;

  @override
  Widget build(BuildContext context) {
    final type = productDelivery?.type ?? "";
    final time = productDelivery?.time ?? "";
    return Container(
      padding: const EdgeInsets.fromLTRB(16, 0, 16, 16),
      decoration: const BoxDecoration(
        color: UIColors.white,
      ),
      child: Column(
        children: [
          DeliveryItem(
            asset: _asset(type),
            title: _title(type),
            subtitle: "Dự kiến giao: ",
            titleColor: _color(type),
            titleFontSize: _fontSize(type),
            content: time,
          ),
          if (type == ProductDeliveryType.inHouse.code && payOnDelivery) ...[
            const SizedBox(
              height: 16,
            ),
            const DeliveryItem(
              asset: "ic_mtrade_pod",
              title: "Thanh toán online khi nhận hàng",
              subtitle: "",
              titleColor: UIColors.green,
              titleFontSize: 14,
              content: "Được kiểm tra trước khi thanh toán",
            ),
          ],
        ],
      ),
    );
  }

  String _asset(String? type) {
    if (type == ProductDeliveryType.preOrder.code) {
      return "ic_mtrade_pre_order";
    }
    if (type == ProductDeliveryType.inHouse.code) {
      return "ic_mtrade_in_house_delivery";
    }
    if (type == ProductDeliveryType.dropShip.code || type == ProductDeliveryType.pickingShipping.code) {
      return "ic_mtrade_dropship_delivery";
    }
    return "";
  }

  String _title(String? type) {
    if (type == ProductDeliveryType.preOrder.code) {
      return "Hàng cần đặt trước";
    }
    if (type == ProductDeliveryType.inHouse.code) {
      return "MTrade / Miễn phí vận chuyển";
    }
    if (type == ProductDeliveryType.dropShip.code || type == ProductDeliveryType.pickingShipping.code) {
      return "Đối tác vận chuyển / Miễn phí vận chuyển";
    }
    return "";
  }

  Color _color(String? type) {
    if (type == ProductDeliveryType.preOrder.code) {
      return UIColors.secondaryColor;
    }
    if (type == ProductDeliveryType.inHouse.code) {
      return UIColors.darkBlue;
    }
    if (type == ProductDeliveryType.dropShip.code || type == ProductDeliveryType.pickingShipping.code) {
      return UIColors.purple;
    }
    return UIColors.defaultText;
  }

  double _fontSize(String? type) {
    if (type == ProductDeliveryType.preOrder.code) {
      return 16;
    }
    return 14;
  }
}
