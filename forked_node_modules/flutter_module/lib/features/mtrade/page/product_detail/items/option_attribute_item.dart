import 'package:flutter/material.dart';
import 'package:flutter_module/common/colors.dart';
import 'package:flutter_module/common/widgets/buttons.dart';
import 'package:flutter_module/common/widgets/checkbox.dart';

import '../../../../../common/styles.dart';
import '../../../../../common/widgets/custom_rounded_rectangle_border.dart';

class OptionAttributeItem extends StatelessWidget {
  const OptionAttributeItem({
    Key? key,
    required this.title,
    required this.onTap,
    this.isSelected = false,
    this.isDisabled = true,
    this.isError = false,
  }) : super(key: key);

  final String title;
  final VoidCallback onTap;
  final bool isSelected;
  final bool isDisabled;
  final bool isError;

  @override
  Widget build(BuildContext context) {
    return AppSplashButton(
      isDisable: isDisabled,
      onTap: onTap,
      child: Row(
        mainAxisSize: MainAxisSize.min,
        children: [
          SizedBox(
            width: 24,
            height: 44,
            child: Stack(
              alignment: Alignment.center,
              children: [
                Align(
                  alignment: Alignment.centerRight,
                  child: Container(
                    width: 12,
                    height: 44,
                    foregroundDecoration: !isError
                        ? null
                        : const ShapeDecoration(
                            shape: CustomRoundedRectangleBorder(
                              borderRadius: BorderRadius.only(
                                topLeft: Radius.circular(8),
                                bottomLeft: Radius.circular(8),
                              ),
                              topSide: BorderSide(color: UIColors.red),
                              topLeftCornerSide: BorderSide(color: UIColors.red),
                              leftSide: BorderSide(color: UIColors.red),
                              bottomLeftCornerSide: BorderSide(color: UIColors.red),
                              bottomSide: BorderSide(color: UIColors.red),
                            ),
                          ),
                    decoration: BoxDecoration(
                      color: getBackgroundColor(),
                      borderRadius: const BorderRadius.only(
                        topLeft: Radius.circular(8),
                        bottomLeft: Radius.circular(8),
                      ),
                    ),
                  ),
                ),
                IgnorePointer(
                  ignoring: true,
                  child: AppCheckbox.circle(
                    isEnable: !isDisabled,
                    value: isSelected,
                    onChanged: (_) => onTap(),
                  ),
                ),
              ],
            ),
          ),
          Container(
            height: 44,
            alignment: Alignment.center,
            constraints: const BoxConstraints(
              minWidth: 50,
            ),
            padding: const EdgeInsets.only(left: 12, right: 24),
            foregroundDecoration: !isError
                ? null
                : const ShapeDecoration(
                    shape: CustomRoundedRectangleBorder(
                      borderRadius: BorderRadius.only(
                        topRight: Radius.circular(8),
                        bottomRight: Radius.circular(8),
                      ),
                      topSide: BorderSide(color: UIColors.red),
                      topRightCornerSide: BorderSide(color: UIColors.red),
                      rightSide: BorderSide(color: UIColors.red),
                      bottomRightCornerSide: BorderSide(color: UIColors.red),
                      bottomSide: BorderSide(color: UIColors.red),
                    ),
                  ),
            decoration: BoxDecoration(
              color: getBackgroundColor(),
              borderRadius: const BorderRadius.only(
                topRight: Radius.circular(8),
                bottomRight: Radius.circular(8),
              ),
            ),
            child: Text(
              title,
              style: UITextStyle.semiBold.copyWith(
                color: getTextColor(),
                fontSize: 16,
                height: 1,
              ),
              maxLines: 1,
              overflow: TextOverflow.ellipsis,
            ),
          ),
        ],
      ),
    );
  }

  getBackgroundColor() {
    Color color = UIColors.background;
    if (isDisabled) {
      color = UIColors.background;
    } else if (isError) {
      color = UIColors.lightRed;
    } else if (isSelected) {
      color = UIColors.lightBlue;
    }
    return color;
  }

  getTextColor() {
    Color color = UIColors.grayText;
    if (isDisabled) {
      color = UIColors.gray;
    } else if (isError) {
      color = UIColors.defaultText;
    } else if (isSelected) {
      color = UIColors.defaultText;
    }
    return color;
  }
}
