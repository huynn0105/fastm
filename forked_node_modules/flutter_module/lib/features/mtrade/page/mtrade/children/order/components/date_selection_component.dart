import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import '../../../../../../../common/styles.dart';
import '../../../../../../../common/utils/datetime_util.dart';
import '../../../../../cubit/date_selection/mtrade_date_selection_cubit.dart';

import '../widgets/date_action_button.dart';

class DateSelectionComponent extends StatelessWidget {
  const DateSelectionComponent({
    Key? key,
    required this.onDateChanged,
  }) : super(key: key);

  final Function(DateTime date) onDateChanged;

  @override
  Widget build(BuildContext context) {
    return BlocConsumer<MTradeDateSelectionCubit, MTradeDateSelectionState>(
      listener: (context, state) {
        onDateChanged(state.date);
      },
      builder: (context, state) {
        return Row(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            DateActionButton.left(
              onTap: context.read<MTradeDateSelectionCubit>().previousMonth,
              enabled: state.enabledPreviousMonth,
            ),
            Container(
              width: 75,
              alignment: Alignment.center,
              child: Text(
                DateTimeUtil.getString(
                  state.date,
                  format: DateTimeFormat.MM_yyyy,
                ),
                style: UITextStyle.medium.copyWith(
                  fontSize: 16,
                ),
              ),
            ),
            DateActionButton.right(
              onTap: context.read<MTradeDateSelectionCubit>().nextMonth,
              enabled: state.enabledNextMonth,
            ),
          ],
        );
      },
    );
  }
}
