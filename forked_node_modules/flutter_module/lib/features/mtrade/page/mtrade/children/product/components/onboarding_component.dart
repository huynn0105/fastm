import 'package:flutter/material.dart';
import 'package:flutter_module/app_data.dart';
import 'package:flutter_module/common/colors.dart';
import 'package:flutter_module/common/constants.dart';
import 'package:flutter_module/common/size.dart';
import 'package:flutter_module/common/widgets/buttons.dart';
import 'package:flutter_module/common/widgets/images.dart';
import 'package:flutter_module/common/widgets/widget_layout.dart';
import 'package:flutter_module/features/mtrade/page/product_detail/components/banner_component.dart';
import 'package:flutter_module/general_config.dart';
import 'package:rive/rive.dart';

import '../../../../../../../common/event_bus/event_bus.dart';
import '../../../../../../../common/styles.dart';
import '../widgets/onboarding_footer.dart';

class OnBoardingComponent extends StatelessWidget {
  const OnBoardingComponent({super.key});

  @override
  Widget build(BuildContext context) {
    return WidgetLayout(
      child: Container(
        color: UIColors.darkBlue,
        width: AppSize.instance.width,
        child: Stack(
          alignment: Alignment.center,
          children: [
            Container(
              constraints: const BoxConstraints(
                maxWidth: 500,
              ),
              child: Column(
                children: [
                  SizedBox(
                    height: AppSize.instance.width > AppConstants.responsiveSize ? 208*AppConstants.responsiveSize/375 : 208,
                    child: BannerComponent(images: AppData.instance.configs?.product?.landingPageBanner ?? [], enabledOpenPreview: false,),
                  ),
                  const SizedBox(height: 24),
                  Stack(
                    alignment: Alignment.topCenter,
                    children: [
                      Container(
                        padding: const EdgeInsets.only(
                          left: 16,
                          right: 16,
                        ),
                        child: const AppImage.asset(
                          asset: 'ic_brochure_content',
                          height: 135,
                          width: 343,
                          fit: BoxFit.contain,
                        ),
                      ),
                      Padding(
                        padding: const EdgeInsets.only(top: 14),
                        child: RichText(
                          textAlign: TextAlign.center,
                          text: TextSpan(
                            children: [
                              TextSpan(
                                text: '“Giúp bạn có thể sở hữu những ',
                                style: UITextStyle.medium.copyWith(
                                  color: UIColors.lightBlue,
                                  height: 1.8,
                                ),
                              ),
                              TextSpan(
                                text: 'SẢN PHẨM,\nDỊCH VỤ',
                                style: UITextStyle.bold.copyWith(
                                  color: UIColors.lightBlue,
                                  height: 1.8,
                                ),
                              ),
                              TextSpan(
                                text: ' cần cho cuộc sống hàng ngày ngay cả\nkhi ',
                                style: UITextStyle.medium.copyWith(
                                  color: UIColors.lightBlue,
                                  height: 1.8,
                                ),
                              ),
                              TextSpan(
                                text: 'CHƯA SẴN SÀNG',
                                style: UITextStyle.bold.copyWith(
                                  color: UIColors.lightBlue,
                                  height: 1.8,
                                ),
                              ),
                              TextSpan(
                                text: ' về tài chính.”',
                                style: UITextStyle.medium.copyWith(
                                  color: UIColors.lightBlue,
                                  height: 1.8,
                                ),
                              )
                            ],
                          ),
                        ),
                      ),
                    ],
                  ),
                  Row(
                    children: [
                      const Spacer(),
                      Column(
                        children: [
                          Align(
                            alignment: Alignment.topLeft,
                            child: _mainItem('ic_brochure_rate_green', 'Trả chậm', 'KHÔNG LÃI SUẤT'),
                          ),
                          const SizedBox(height: 12),
                          Align(
                            alignment: Alignment.topLeft,
                            child: _mainItem('ic_brochure_consultant_green', 'Tư vấn', 'TẬN TÂM, TẬN NƠI'),
                          ),
                          const SizedBox(height: 12),
                          Align(
                            alignment: Alignment.topLeft,
                            child: _mainItem('ic_brochure_delivery_green', 'Miễn phí', 'GIAO HÀNG, LẮP ĐẶT'),
                          ),
                          const SizedBox(height: 24),
                        ],
                      ),
                      const SizedBox(width: 16,),
                      const AppImage.asset(
                        asset: 'ic_brochure_mascot',
                        height: 192,
                        width: 118,
                      ),
                      const Spacer(),
                    ],
                  ),
                  const SizedBox(height: 32,),
                  SizedBox(
                    height: 40,
                    width: 178,
                    child: SplashButton(
                      highlightColor: Colors.transparent,
                      hoverColor: Colors.transparent,
                      onTap: () {
                        eventBus.fire(const DiscoverWebsiteEventBus());
                      },
                      child: const RiveAnimation.asset(
                        'assets/jsons/discover_button.riv',
                      ),
                    ),
                  ),
                  const SizedBox(height: 40,),
                  const OnBoardingFooter(),
                ],
              ),
            )
          ],
        ),
      ),
    );
  }
}

_mainItem(String image, String title, String content) {
  return Container(
    height: 56,
    width: 213,
    decoration: BoxDecoration(color: UIColors.extraGreen, borderRadius: BorderRadius.circular(8)),
    child: Row(
      children: [
        const SizedBox(width: 12),
        AppImage.asset(
          asset: image,
          width: 32,
          height: 32,
          fit: BoxFit.contain,
        ),
        const SizedBox(width: 12),
        Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Text(
              title,
              style: UITextStyle.medium.copyWith(
                fontSize: 15,
                color: UIColors.lightGreen,
              ),
            ),
            // SizedBox(height: 12),
            Text(
              content,
              style: UITextStyle.bold.copyWith(
                  color: UIColors.white
              ),
            ),
          ],
        ),
      ],
    ),
  );
}