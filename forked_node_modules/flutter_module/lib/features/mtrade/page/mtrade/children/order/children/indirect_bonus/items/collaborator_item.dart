import 'package:auto_route/auto_route.dart';
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import '../../../../../../../../../common/utils/datetime_util.dart';
import '../../../../../../../cubit/date_selection/mtrade_date_selection_cubit.dart';
import '../../../../../../../../../routes/routes.gr.dart';

import '../../../../../../../../../common/utils/text_util.dart';
import '../../../../../../../../../common/colors.dart';
import '../../../../../../../../../common/global_function.dart';
import '../../../../../../../../../common/styles.dart';
import '../../../../../../../../../common/utils/format_util.dart';
import '../../../../../../../../../common/widgets/buttons.dart';
import '../../../../../../../../../common/widgets/images.dart';
import '../../../../../../../../../models/mtrade/bonus/mtrade_indirect_bonus_model.dart';

class CollaboratorItem extends StatelessWidget {
  const CollaboratorItem({
    Key? key,
    required this.item,
  }) : super(key: key);

  final MTradeIndirectBonusModel item;

  @override
  Widget build(BuildContext context) {
    return AppSplashButton(
      onTap: () {
        context.pushRoute(
          MTradeDetailCollaboratorRoute(
            collaboratorID: item.saleID ?? '',
          ),
        );
      },
      borderRadius: BorderRadius.circular(12),
      child: Container(
        height: 70,
        padding: const EdgeInsets.symmetric(vertical: 12, horizontal: 10),
        decoration: BoxDecoration(
          color: UIColors.white,
          borderRadius: BorderRadius.circular(12),
        ),
        child: Row(
          children: [
            AppImage.network(
              url: TextUtils.convertFirebaseUrlAvatar(item.avatarImage),
              width: 48,
              height: 48,
              borderRadius: BorderRadius.circular(24),
            ),
            const SizedBox(
              width: 12,
            ),
            Expanded(
              child: Column(
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  Row(
                    children: [
                      Flexible(
                        child: Text(
                          item.saleFullName ?? "",
                          style: UITextStyle.regular.copyWith(
                            fontSize: 14,
                          ),
                          maxLines: 1,
                          overflow: TextOverflow.ellipsis,
                        ),
                      ),
                      Text(
                        "  •  Tầng ${item.refLevel ?? ""}",
                        style: UITextStyle.regular.copyWith(
                          fontSize: 14,
                          color: UIColors.grayText,
                        ),
                        maxLines: 1,
                        overflow: TextOverflow.ellipsis,
                      ),
                    ],
                  ),
                  const SizedBox(
                    height: 2,
                  ),
                  Text(
                    FormatUtil.currencyFormat(int.tryParse(item.sumComm ?? "")),
                    style: UITextStyle.semiBold.copyWith(
                      fontSize: 14,
                      color: UIColors.darkBlue,
                    ),
                  ),
                ],
              ),
            ),
            const SizedBox(
              width: 12,
            ),
            Row(
              children: [
                SplashButton(
                  onTap: () {
                    debugPrint("indirect_bonus_chat");
                  },
                  borderRadius: BorderRadius.circular(20),
                  child: const Padding(
                    padding: EdgeInsets.all(5),
                    child: AppImage.asset(
                      asset: "ic_message",
                      width: 24,
                      height: 24,
                      color: UIColors.grayText,
                    ),
                  ),
                ),
                // const SizedBox(
                //   width: 8,
                // ),
                // SplashButton(
                //   onTap: () {
                //     debugPrint("indirect_bonus_call");
                //     GlobalFunction.launchPhone(item.mobilePhone ?? "");
                //   },
                //   borderRadius: BorderRadius.circular(20),
                //   child: const Padding(
                //     padding: EdgeInsets.all(5),
                //     child: AppImage.asset(
                //       asset: "ic_call_outline",
                //       width: 24,
                //       height: 24,
                //       color: UIColors.grayText,
                //     ),
                //   ),
                // ),
              ],
            ),
          ],
        ),
      ),
    );
  }
}
