import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:flutter_module/common/bloc_status.dart';
import 'package:flutter_module/common/dialogs/dialog_view/mtrade/mtrade_dialog_view.dart';
import 'package:flutter_module/features/mtrade/cubit/check_project_code/mtrade_check_project_code_cubit.dart';

import '../../../../../../../common/colors.dart';
import '../../../../../../../common/global_function.dart';
import '../../../../../../../common/utils/text_util.dart';
import '../../../../../../../common/widgets/widget_layout.dart';
import '../../../../../../../di/get_it.dart';

class ProjectCodeComponent extends StatelessWidget {
  const ProjectCodeComponent({
    Key? key,
    required this.message,
    required this.url,
  }) : super(key: key);

  final String message;
  final String url;

  @override
  Widget build(BuildContext context) {
    return Container(
      padding: const EdgeInsets.fromLTRB(16, 70, 16, 0),
      decoration: const BoxDecoration(
        color: UIColors.background,
      ),
      child: MTradeDialogView(
        asset: "ic_mtrade_mascot_information",
        titleColor: UIColors.secondaryColor,
        title: "Chưa thể sử dụng tính năng này",
        message: message,
        positiveTitle: "Đăng ký nghiệp vụ ngay",
        showDottedDivider: true,
        enableAutoPop: false,
        positiveCallback: () async {
          GlobalFunction.pushWebView(
            context: context,
            url: TextUtils.convertPrivateUrl(url),
          ).then((_) {
            getItInstance.get<MTradeCheckProjectCodeCubit>().refreshPayNow();
          });
        },
      ),
    );
  }
}
