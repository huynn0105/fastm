import 'package:auto_route/auto_route.dart';
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:flutter_module/features/mtrade/cubit/campaign/mtrade_campaign_cubit.dart';
import 'package:flutter_module/features/mtrade/cubit/filtered_promotion_product/mtrade_filtered_promotion_product_cubit.dart';
import 'package:flutter_module/features/mtrade/cubit/hot_product/mtrade_hot_product_cubit.dart';
import 'package:flutter_module/features/mtrade/cubit/personal_website_setup/mtrade_personal_website_setup_cubit.dart';
import 'package:flutter_module/features/mtrade/cubit/personal_website_statistic/mtrade_personal_website_statistic_cubit.dart';
import 'package:flutter_module/features/mtrade/cubit/product_group/pinned_search_cubit.dart';
import 'package:flutter_module/features/mtrade/page/mtrade/children/product/components/onboarding_component.dart';
import '../../../../../../common/widgets/app_scaffold.dart';
import '../../../../cubit/banner/mtrade_banner_cubit.dart';
import '../../../../cubit/history_product/mtrade_history_product_cubit.dart';
import '../../../../cubit/product_group/mtrade_product_group_cubit.dart';
import '../../../../cubit/product_group/pinned_category_cubit.dart';
import 'mtrade_product_view.dart';

@RoutePage()
class MTradeProductPage extends StatelessWidget implements AutoRouteWrapper {
  const MTradeProductPage({
    Key? key,
    @QueryParam("pageID") this.pageID,
    @QueryParam("provinceCode") this.provinceCode,
    @QueryParam("districtCode") this.districtCode,
  }) : super(key: key);
  final String? pageID;
  final String? provinceCode;
  final String? districtCode;

  @override
  Widget wrappedRoute(BuildContext context) {
    return MultiBlocProvider(
      providers: [
        BlocProvider(
          create: (_) => MTradeCampaignCubit(),
        ),
        BlocProvider(
          create: (_) => MTradeBannerCubit(),
        ),
        BlocProvider(
          create: (_) => MTradeHistoryProductCubit(),
        ),
        BlocProvider(
          create: (_) => MTradeProductGroupCubit(),
        ),
        BlocProvider(
          create: (_) => MTradeFilteredPromotionProductCubit(),
        ),
        BlocProvider(
          create: (_) => PinnedCategoryCubit(),
        ),
        BlocProvider(
          create: (_) => PinnedSearchCubit(),
        ),
        BlocProvider(
          create: (_) => MTradeHotProductCubit(),
        ),
        BlocProvider(
          create: (_) => MTradePersonalWebsiteSetupCubit(),
        ),
        BlocProvider(
          create: (_) => MTradePersonalWebsiteStatisticCubit(),
        ),
      ],
      child: this,
    );
  }

  @override
  Widget build(BuildContext context) {
    return const AppScaffold(
      body: MTradeProductView(
        onBoardingWidget: OnBoardingComponent(),
      ),
    );
  }
}
