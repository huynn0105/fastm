import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:flutter_module/common/bloc_status.dart';
import '../../../../../cubit/banner/mtrade_banner_cubit.dart';
import '../widgets/shimmer_banner_loading.dart';
import '../../../widgets/mtrade_carousel_widget.dart';

class BannerComponent extends StatelessWidget {
  const BannerComponent({super.key});

  @override
  Widget build(BuildContext context) {
    return BlocBuilder<MTradeBannerCubit, MTradeBannerState>(
      builder: (context, state) {
        if (state.status.isInitial) {
          context.read<MTradeBannerCubit>().fetchData();
        }

        final data = state.banners;
        final images = data.map((e) => e.imageURL ?? "").toList();
        return state.status.showLoading
            ? const Padding(
                padding: EdgeInsets.only(top: 10),
                child: ShimmerBannerLoading(),
              )
            : data.isEmpty
                ? const SizedBox()
                : Padding(
                    padding: const EdgeInsets.only(top: 10),
                    child: MTradeCarouselWidget(images: images),
                  );
      },
    );
  }
}
