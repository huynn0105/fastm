import 'dart:io';

import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:flutter_module/common/bloc_status.dart';
import 'package:flutter_module/common/enum/mtrade/vehicle_type.dart';
import 'package:flutter_module/common/widgets/buttons.dart';
import '../../../../../../../../common/colors.dart';
import '../../../../../../../../common/styles.dart';
import '../../../../../../../../common/widgets/checkbox.dart';
import '../../../../../../cubit/product_scheme_pay_later_order/product_scheme_pay_later_order_cubit.dart';
import '../../../../../mtrade/children/brochure/widgets/requirement_widget.dart';
import '../items/documnet_image_item.dart';

class MTradeInsuranceComponent extends StatelessWidget {
  const MTradeInsuranceComponent({
    Key? key,
  }) : super(key: key);

  @override
  Widget build(BuildContext context) {
    final cubit = context.read<ProductSchemePayLaterOrderCubit>();
    return BlocBuilder<ProductSchemePayLaterOrderCubit, ProductSchemePayLaterOrderState>(
      builder: (context, state) {
        return Padding(
          padding: const EdgeInsets.fromLTRB(16, 10, 16, 0),
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              Text(
                "Thông tin xe bổ sung",
                style: UITextStyle.regular.copyWith(
                  fontSize: 14,
                  color: UIColors.grayText,
                ),
              ),
              const SizedBox(
                height: 8,
              ),
              Container(
                padding: const EdgeInsets.all(16),
                decoration: BoxDecoration(
                  color: UIColors.white,
                  borderRadius: BorderRadius.circular(12),
                ),
                child: Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    // RequirementWidget(
                    //   title: "Bảo hiểm người tham gia trả chậm",
                    //   child: Row(
                    //     children: [
                    //       Expanded(
                    //         child: SplashButton(
                    //           onTap: () {
                    //             cubit.selectVehicleType(vehicleType: VehicleType.company);
                    //           },
                    //           child: AppCheckbox.circle(
                    //             title: "Xe công ty",
                    //             value: state.vehicleType == VehicleType.company,
                    //             onChanged: (_) {},
                    //           ),
                    //         ),
                    //       ),
                    //       Expanded(
                    //         child: SplashButton(
                    //           onTap: () {
                    //             cubit.selectVehicleType(vehicleType: VehicleType.personal);
                    //           },
                    //           child: AppCheckbox.circle(
                    //             title: "Xe cá nhân",
                    //             value: state.vehicleType == VehicleType.personal,
                    //             onChanged: (_) {},
                    //           ),
                    //         ),
                    //       ),
                    //     ],
                    //   ),
                    // ),
                    // const SizedBox(height: 16,),
                    Text(
                      'Hình chụp 2 mặt cà vẹt xe',
                      style: UITextStyle.regular.copyWith(
                        fontSize: 13,
                        color: UIColors.grayText,
                      ),
                    ),
                    const SizedBox(height: 8,),
                    Row(
                      children: [
                        Expanded(
                          child: DocumentImageItem(
                            url: state.imageDocumentFrontUrl,
                            type: 'Mặt trước',
                            isLoading: state.frontCaptureStatus.isLoading,
                            onAddImage: (File file) {
                              cubit.captureFrontDocument(image: file);
                            },
                            onRemoveImage: () {
                              cubit.removeFrontDocument();
                            },
                          ),
                        ),
                        const SizedBox(width: 16,),
                        Expanded(
                          child: DocumentImageItem(
                            url: state.imageDocumentBackUrl,
                            type: 'Mặt sau',
                            isLoading: state.backCaptureStatus.isLoading,
                            onAddImage: (File file) {
                              cubit.captureBackDocument(image: file);
                            },
                            onRemoveImage: () {
                              cubit.removeBackDocument();
                            },
                          ),
                        ),
                      ],
                    )
                  ],
                ),
              ),
            ],
          ),
        );
      },
    );
  }
}
