import 'package:flutter/material.dart';
import 'package:scroll_to_index/scroll_to_index.dart';

import '../../../../../../../common/constants.dart';
import '../../../../../../../common/widgets/collect_data_view.dart';
import '../../../../../../../common/widgets/textfields.dart';

class OrderPersonalInvoiceComponent extends StatelessWidget {
  const OrderPersonalInvoiceComponent({
    Key? key,
    required this.invoiceFullnameController,
    required this.invoiceAddressController,
    required this.onFullnameChanged,
    required this.onAddressChanged,
    required this.errorFields,
    required this.errorIndexes,
    required this.scrollController,
  }) : super(key: key);

  final TextEditingController invoiceFullnameController;
  final TextEditingController invoiceAddressController;
  final Map<String, String> errorFields;
  final Map<String, int> errorIndexes;
  final AutoScrollController scrollController;
  final Function(String) onFullnameChanged;
  final Function(String) onAddressChanged;

  @override
  Widget build(BuildContext context) {
    return Column(
      children: [
        AutoScrollTag(
          controller: scrollController,
          key: ValueKey(errorIndexes[AppConstants.invoicePersonalFullNameKey] ?? 0),
          index: errorIndexes[AppConstants.invoicePersonalFullNameKey] ?? 0,
          child: CollectDataView(
            errorMsg: errorFields[AppConstants.invoicePersonalFullNameKey],
            child: UITextField(
              controller: invoiceFullnameController,
              labelText: 'Họ tên',
              hasError: errorFields[AppConstants.invoicePersonalFullNameKey] != null,
              onChanged: onFullnameChanged,
            ),
          ),
        ),
        const SizedBox(
          height: 16,
        ),
        AutoScrollTag(
          controller: scrollController,
          key: ValueKey(errorIndexes[AppConstants.invoicePersonalAddressKey] ?? 0),
          index: errorIndexes[AppConstants.invoicePersonalAddressKey] ?? 0,
          child: CollectDataView(
            errorMsg: errorFields[AppConstants.invoicePersonalAddressKey],
            child: UITextField(
              controller: invoiceAddressController,
              labelText: 'Địa chỉ',
              hasError: errorFields[AppConstants.invoicePersonalAddressKey] != null,
              onChanged: onAddressChanged,
            ),
          ),
        ),
      ],
    );
  }
}
