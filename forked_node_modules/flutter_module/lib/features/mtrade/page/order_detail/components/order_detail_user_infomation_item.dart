import 'package:flutter/material.dart';
import 'package:flutter_module/common/colors.dart';
import 'package:flutter_module/common/global_function.dart';
import 'package:flutter_module/common/styles.dart';
import 'package:flutter_module/common/utils/format_util.dart';
import 'package:flutter_module/common/widgets/buttons.dart';
import 'package:flutter_module/common/widgets/divider.dart';
import 'package:flutter_module/common/widgets/html_widget.dart';
import 'package:flutter_module/common/widgets/images.dart';
import 'package:flutter_module/features/mtrade/page/mtrade/widgets/mtrade_block_widget.dart';
import 'package:flutter_module/models/mtrade/order/mtrade_order_detail_model.dart';
import 'package:flutter_module/models/mtrade/order/order_model.dart';
import 'package:url_launcher/url_launcher.dart';


class OrderDetailUserInformationItem extends StatelessWidget {
  const OrderDetailUserInformationItem({
    Key? key,
    required this.data,
  }) : super(key: key);

  final MTradeOrderDetailModel? data;

  @override
  Widget build(BuildContext context) {
    final name = data?.customerInfo?.name ?? "";
    final phone = data?.customerInfo?.phone ?? "";
    final district = data?.customerInfo?.district ?? "";
    final province = data?.customerInfo?.province ?? "";
    final ward = data?.customerInfo?.ward ?? "";
    final address = data?.customerInfo?.address ?? "";
    final idNumber = data?.customerInfo?.idNumber ?? "";
    final isMPL = data?.paymentMethod == "MPL";

    return MTradeBlockWidget(
      childPadding: const EdgeInsets.symmetric(horizontal: 16),
      titlePadding: const EdgeInsets.symmetric(horizontal: 16),
      spacing: 8,
      title: 'Thông tin người trả chậm',
      child: Container(
        padding: const EdgeInsets.symmetric(
          vertical: 12,
          horizontal: 16,
        ),
        decoration: BoxDecoration(
          borderRadius: BorderRadius.circular(8),
          color: UIColors.white,
        ),
        child: Column(
          children: [
            Table(
              columnWidths: const {
                0: FlexColumnWidth(1),
                1: FlexColumnWidth(1.5),
              },
              children: [
                if(isMPL == false)
                  TableRow(
                  children: [
                    Text(
                      "Họ và tên:",
                      style: UITextStyle.regular.copyWith(
                        color: UIColors.grayText,
                      ),
                    ),
                    Text(
                      name,
                      style: UITextStyle.semiBold.copyWith(),
                    ),
                  ],
                ),
                if(phone.isNotEmpty == true)
                TableRow(
                  children: [
                    Align(
                      alignment: Alignment.centerLeft,
                      child: Text(
                        "Số điện thoại:",
                        style: UITextStyle.regular.copyWith(
                          color: UIColors.grayText,
                        ),
                      ),
                    ),
                    SplashButton(
                      onTap: () {
                        GlobalFunction.launchPhone(phone);
                      },
                      child: RichText(
                        text: TextSpan(
                          children: [
                            TextSpan(
                              text: FormatUtil.phoneFormat(
                                  phone),
                              style: UITextStyle.semiBold
                                  .copyWith(color: UIColors.primaryColor),
                            ),
                            const WidgetSpan(
                                child: SizedBox(
                              width: 6,
                            )),
                            const WidgetSpan(
                              child: AppImage.asset(
                                asset: 'ic_call_ringing',
                                width: 20,
                                height: 20,
                                color: UIColors.primaryColor,
                              ),
                            ),
                          ],
                        ),
                      ),
                    ),
                  ],
                ),
                if(idNumber.isNotEmpty == true)
                TableRow(
                  children: [
                    Text(
                      "Số CCCD:",
                      style: UITextStyle.regular.copyWith(
                        color: UIColors.grayText,
                      ),
                    ),
                    Text(
                      idNumber,
                      style: UITextStyle.semiBold.copyWith(),
                    ),
                  ],
                ),
                if(province.isNotEmpty == true)
                TableRow(
                  children: [
                    Text(
                      "Tỉnh/Thành phố:",
                      style: UITextStyle.regular.copyWith(
                        color: UIColors.grayText,
                      ),
                    ),
                    Text(
                      province,
                      style: UITextStyle.semiBold.copyWith(),
                    ),
                  ],
                ),
                if(district.isNotEmpty == true)
                TableRow(
                  children: [
                    Text(
                      "Quận/Huyện:",
                      style: UITextStyle.regular.copyWith(
                        color: UIColors.grayText,
                      ),
                    ),
                    Text(
                      district,
                      style: UITextStyle.semiBold.copyWith(),
                    ),
                  ],
                ),
                if(ward.isNotEmpty == true)
                TableRow(
                  children: [
                    Text(
                      "Phường/Xã:",
                      style: UITextStyle.regular.copyWith(
                        color: UIColors.grayText,
                      ),
                    ),
                    Text(
                      ward,
                      style: UITextStyle.semiBold.copyWith(),
                    ),
                  ],
                ),
                if(address.isNotEmpty == true)
                TableRow(
                  children: [
                    Text(
                      "Tên đường, số nhà:",
                      style: UITextStyle.regular.copyWith(
                        color: UIColors.grayText,
                      ),
                    ),
                    Text(
                      address,
                      style: UITextStyle.semiBold.copyWith(),
                    ),
                  ],
                ),
              ],
            ),
          ],
        ),
      ),
    );
  }
}
