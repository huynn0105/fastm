import 'package:collection/collection.dart';
import 'package:flutter/material.dart';
import 'package:flutter_module/common/colors.dart';
import 'package:flutter_module/common/styles.dart';
import 'package:flutter_module/features/academy/page/quiz/items/quiz_answer_item.dart';
import 'package:flutter_module/models/academy/event/academy_event_checkout_model.dart';

class QuizResultItem extends StatelessWidget {
  final EventQuiz? quiz;
  final String? myAnswerValue;
  final int? index;

  const QuizResultItem({
    super.key,
    this.quiz,
    this.myAnswerValue,
    this.index,
  });

  @override
  Widget build(BuildContext context) {
    final trueAnswerValue = quiz?.answer?.firstWhereOrNull((element) => element.isAnswer == true)?.desc;

    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        if (index! > 0) ...{
          const SizedBox(
            height: 18,
          ),
          const Divider(
            height: 0,
            color: UIColors.lightGray,
            thickness: 4,
          ),
        },
        const SizedBox(
          height: 16,
        ),
        Row(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              '${quiz?.index}.',
              style: UITextStyle.medium.copyWith(
                fontSize: 16,
                color: UIColors.darkBlue,
              ),
            ),
            const SizedBox(
              width: 8,
            ),
            Expanded(
              child: Text(
                quiz?.question ?? '',
                style: UITextStyle.medium.copyWith(
                  fontSize: 16,
                  color: UIColors.darkBlue,
                ),
              ),
            ),
          ],
        ),
        const SizedBox(
          height: 12,
        ),
        Text(
          'Đáp án của bạn',
          style: UITextStyle.regular.copyWith(color: UIColors.grayText),
        ),
        QuizAnswerItem(
          answerValue: myAnswerValue,
          isWrong: true,
          isChecked: true,
        ),
        const SizedBox(
          height: 12,
        ),
        Text(
          'Đáp án đúng',
          style: UITextStyle.regular.copyWith(color: UIColors.grayText),
        ),
        QuizAnswerItem(
          answerValue: trueAnswerValue,
          isRight: true,
          isChecked: true,
        ),
      ],
    );
  }
}
