import 'package:auto_route/auto_route.dart';
import 'package:flutter/foundation.dart';
import 'package:flutter/material.dart';
import 'package:flutter_module/common/bloc_status.dart';
import 'package:flutter_module/common/dialogs/dialog_view/mtrade/mtrade_dialog_view.dart';
import 'package:flutter_module/common/widgets/app_scaffold.dart';
import 'package:flutter_module/common/widgets/appbar.dart';
import 'package:flutter_module/common/widgets/widget_layout.dart';

import '../../../../common/colors.dart';
import '../../../../common/utils/redirect_util.dart';

@RoutePage()
class RegisterEventResultPage extends StatelessWidget {
  const RegisterEventResultPage({
    super.key,
    required this.status,
    this.title,
    this.message,
    this.buttonTitle,
    this.buttonTap,
  });

  final BlocStatus status;
  final String? title;
  final String? message;
  final String? buttonTitle;
  final Function()? buttonTap;

  @override
  Widget build(BuildContext context) {
    return AppScaffold.academy(
      appBar: kIsWeb
          ? null
          : MFastAdvanceAppBar(
              context: context,
              title: "Kết quả đăng ký",
              onBack: context.popRoute,
              onHome: RedirectUtil.backToMFast,
            ),
      body: Column(
        children: [
          const SizedBox(
            height: 60,
          ),
          if (status.isSuccess) ...[
            WidgetLayout(
              child: Padding(
                padding: const EdgeInsets.symmetric(horizontal: 16),
                child: MTradeDialogView(
                  asset: "ic_mtrade_mascot_success",
                  title: title ?? "Đăng ký thành công",
                  titleColor: UIColors.green,
                  messageAlign: TextAlign.left,
                  message: message ??
                      "Chúc mừng bạn đã đăng ký sự kiện thành công. Lưu ý thời gian, phương thức và địa điểm để tham gia đúng giờ nhé!",
                  showDottedDivider: true,
                  positiveTitle: buttonTitle ?? "Hoàn tất đăng ký",
                  positiveCallback: () {
                    buttonTap?.call();
                  },
                ),
              ),
            ),
          ],
          if (status.isFailure) ...[
            WidgetLayout(
              child: Padding(
                padding: const EdgeInsets.symmetric(horizontal: 16),
                child: MTradeDialogView(
                  asset: "ic_mtrade_mascot_error",
                  title: title ?? "Đăng ký thất bại",
                  titleColor: UIColors.red,
                  messageAlign: TextAlign.left,
                  message: message ??
                      "Rất tiếc, đã hết hạn đăng ký cho phép. Theo dõi danh sách và đăng ký sớm ở những sự kiện sau nhé!",
                  showDottedDivider: true,
                  positiveTitle: buttonTitle ?? "Đã hiểu và quay lại",
                  positiveCallback: () {
                    buttonTap?.call();
                  },
                ),
              ),
            ),
          ],
        ],
      ),
    );
  }
}
