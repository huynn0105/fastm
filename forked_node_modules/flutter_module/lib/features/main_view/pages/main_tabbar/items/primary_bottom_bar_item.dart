import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:flutter_module/common/event_bus/event_bus.dart';
import 'package:flutter_module/features/main_view/cubit/customer_requirements/customer_requirements_cubit.dart';
import 'package:flutter_module/features/main_view/pages/main_tabbar/components/menu_component.dart';
import 'package:flutter_module/features/main_view/pages/main_tabbar/widgets/custom_page_route.dart';
import 'package:flutter_module/features/main_view/pages/main_tabbar/items/primary_tab_button.dart';
import 'package:flutter_module/general_config.dart';
import 'package:flutter_module/models/client/client_detail/client_detail_model.dart';
import 'package:flutter_module/services/local/local_data_helper.dart';

class PrimaryBottomBarItem extends StatelessWidget {
  const PrimaryBottomBarItem({super.key});

  @override
  Widget build(BuildContext context) {
    return Hero(
      tag: "primary-tab-button",
      child: PrimaryTabButton(
        onTap: () {
          PrimaryBottomBarItem.showMainMenuSheet(context);
          if (LocalDataHelper.instance.getIsUserGuideHome()) {
            eventBus.fire(DisableUserGuideEventBus());
          }
        },
      ),
    );
  }

  static showMainMenuSheet(
    BuildContext context, {
    ClientDetailModel? client,
  }) {
    Navigator.of(context).push(
      SlideTopTransitionRoute(
        page: BlocProvider.value(
          value: context.read<CustomerRequirementsCubit>(),
          child: MenuComponent(
            client: client,
          ),
        ),
      ),
    );
  }
}
