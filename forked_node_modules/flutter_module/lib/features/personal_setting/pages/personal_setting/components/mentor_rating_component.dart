import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:flutter_module/common/bloc_status.dart';
import 'package:flutter_module/common/colors.dart';

import '../../../cubit/mentor_rating/mentor_rating_cubit.dart';
import '../items/rating/detail_rating_item.dart';
import '../items/rating/overall_rating_item.dart';
import '../widgets/personal_setting_block_widget.dart';

class MentorRatingComponent extends StatelessWidget {
  const MentorRatingComponent({
    Key? key,
    required this.name,
  }) : super(key: key);

  final String name;

  @override
  Widget build(BuildContext context) {
    return PersonalSettingBlockWidget(
      title: "Kỹ năng dẫn dắt của $name",
      padding: const EdgeInsets.all(16),
      child: Column(
        children: [
          BlocBuilder<MentorRatingCubit, MentorRatingState>(
            builder: (context, state) {
              return OverallRatingItem(
                avg: state.data?.avgRating ?? 0,
                amount: state.data?.amountRating ?? 0,
                percent: state.data?.percent,
              );
            },
          ),
          const SizedBox(height: 12,),
          const Divider(
            color: UIColors.lightGray,
            height: 1,
          ),
          const SizedBox(height: 15,),
          BlocBuilder<MentorRatingCubit, MentorRatingState>(
            builder: (context, state) {
              return state.status.isSuccess
                  ? const DetailRatingItem()
                  : const SizedBox(
                      height: 250,
                      child: Center(
                        child: CircularProgressIndicator(
                          color: UIColors.primaryColor,
                        ),
                      ),
                    );
            },
          ),
        ],
      ),
    );
  }
}
