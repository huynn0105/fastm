import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:flutter_module/common/colors.dart';
import 'package:flutter_module/common/constants.dart';
import 'package:flutter_module/common/size.dart';
import 'package:flutter_module/common/styles.dart';
import 'package:flutter_module/common/widgets/avatar_widget.dart';
import 'package:flutter_module/common/widgets/images.dart';
import 'package:flutter_module/common/widgets/radio.dart';
import 'package:flutter_module/features/personal_setting/pages/personal_setting/items/rating/detail_rating_item.dart';
import 'package:flutter_module/features/personal_setting/pages/personal_setting/items/rating/overall_rating_item.dart';
import 'package:flutter_module/models/mtrade/my_review/mentor_rating_model.dart';

import '../../../cubit/mentor_rating/mentor_rating_cubit.dart';

class MentorComponent extends StatelessWidget {
  const MentorComponent({
    super.key,
    this.name,
    this.rank,
  });
  final String? name;
  final String? rank;

  @override
  Widget build(BuildContext context) {
    return LimitedBox(
      maxHeight: AppSize.instance.height * 0.75,
      child: SingleChildScrollView(
        child: Padding(
          padding: const EdgeInsets.all(16),
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              Row(
                children: [
                  const AvatarWidget(url: AppConstants.avatar, size: 64),
                  const SizedBox(
                    width: 16,
                  ),
                  Expanded(
                    child: Row(
                      children: [
                        Expanded(
                          child: Column(
                            crossAxisAlignment: CrossAxisAlignment.start,
                            mainAxisAlignment: MainAxisAlignment.center,
                            children: [
                              Row(
                                children: [
                                  Flexible(
                                    child: Text(
                                      name ?? '',
                                      style: UITextStyle.medium.copyWith(
                                        fontSize: 16,
                                        color: UIColors.lightBlack,
                                      ),
                                      maxLines: 1,
                                      overflow: TextOverflow.ellipsis,
                                    ),
                                  ),
                                  const SizedBox(
                                    width: 8,
                                  ),
                                  Container(
                                    width: 4,
                                    height: 4,
                                    decoration: BoxDecoration(
                                      borderRadius: BorderRadius.circular(2),
                                      color: UIColors.darkGray,
                                    ),
                                  ),
                                  const SizedBox(
                                    width: 8,
                                  ),
                                  Text(
                                    rank ?? '',
                                    style: UITextStyle.medium.copyWith(
                                      fontSize: 16,
                                      color: UIColors.darkBlue,
                                    ),
                                  ),
                                  const SizedBox(
                                    width: 12,
                                  ),
                                ],
                              ),
                              Row(
                                mainAxisSize: MainAxisSize.min,
                                children: List.generate(5, (index) {
                                  return const AppImage.asset(
                                    asset: "ic_star",
                                    width: 16,
                                    height: 16,
                                    color: UIColors.green,
                                  );
                                }),
                              )
                            ],
                          ),
                        ),
                        Row(
                          children: [
                            Text(
                              'Chọn',
                              style: UITextStyle.regular.copyWith(
                                  fontSize: 13, color: UIColors.grayText),
                            ),
                            const SizedBox(
                              width: 4,
                            ),
                            const CheckRadio(
                              value: false,
                            ),
                          ],
                        ),
                      ],
                    ),
                  ),
                ],
              ),
              const SizedBox(
                height: 12,
              ),
              const SizedBox(
                height: 16,
              ),
              Text(
                "Kỹ năng dẫn dắt của $name",
                style: UITextStyle.regular.copyWith(
                  color: UIColors.grayText,
                ),
              ),
              Container(
                padding: const EdgeInsets.all(16),
                margin: const EdgeInsets.only(top: 8),
                decoration: BoxDecoration(
                  borderRadius: BorderRadius.circular(12),
                  color: UIColors.white,
                ),
                child: Column(
                  children: [
                    OverallRatingItem(
                      avg: 3,
                      amount: 12,
                      percent: RatingPercentModel.fromJson(
                        {"1": 10, "2": 12},
                      ),
                    ),
                    const SizedBox(
                      height: 12,
                    ),
                    const Divider(
                      thickness: 1,
                      height: 0,
                    ),
                    const SizedBox(
                      height: 16,
                    ),
                    BlocProvider(
                      create: (context) => MentorRatingCubit(),
                      child: const DetailRatingItem(),
                    )
                  ],
                ),
              ),
            ],
          ),
        ),
      ),
    );
  }
}
