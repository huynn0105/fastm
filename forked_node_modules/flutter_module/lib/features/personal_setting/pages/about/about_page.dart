import 'package:auto_route/annotations.dart';
import 'package:auto_route/auto_route.dart';
import 'package:flutter/material.dart';
import 'package:flutter_module/app_data.dart';
import 'package:flutter_module/common/colors.dart';
import 'package:flutter_module/common/constants.dart';
import 'package:flutter_module/common/global_function.dart';
import 'package:flutter_module/common/styles.dart';
import 'package:flutter_module/common/widgets/appbar.dart';
import 'package:flutter_module/routes/routes.gr.dart';
import 'package:package_info_plus/package_info_plus.dart';

import 'components/section_content.dart';

@RoutePage()
class AboutPage extends StatefulWidget {
  const AboutPage({super.key});

  @override
  State<AboutPage> createState() => _AboutPageState();
}

class _AboutPageState extends State<AboutPage> {
  PackageInfo? packageInfo;

  @override
  void initState() {
    // TODO: implement initState
    super.initState();
    PackageInfo.fromPlatform().then((value) {
      setState(() {
        packageInfo = value;
      });
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: MFastSimpleAppBar(
        title: "Thông tin ứng dụng",
        context: context,
      ),
      body: ListView(
        physics: AppConstants.physics,
        children: [
          Container(
            color: UIColors.white,
            width: double.infinity,
            child: Padding(
              padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 12),
              child: Column(
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  Text(
                    'Về DigiPay JSC',
                    style: UITextStyle.bold.copyWith(fontSize: 16, color: UIColors.boldText),
                  ),
                  const SizedBox(
                    height: 12,
                  ),
                  Text(
                    "Công ty cổ phần giải pháp Thanh Toán Số (DigiPay) - công ty tài chính dựa trên nền tảng công nghệ xu hướng Fintech - trực thuộc DigiTel, một công ty hàng đầu trong lãnh vực công nghệ ICT tại Việt Nam.",
                    style: UITextStyle.regular.copyWith(
                      fontSize: 14,
                      color: UIColors.boldText.withOpacity(0.8),
                    ),
                  ),
                  const SizedBox(
                    height: 12,
                  ),
                  Text(
                    "Thừa hưởng nền tảng và ưu thế về công nghệ của DigiTel. Tại DigiPay, chúng tôi không ngừng tìm tòi và khai thác những công nghệ mới, phù hợp với từng phân khúc thị trường, trong mọi lĩnh vực, với định hướng: Số hoá cuộc sống.",
                    style: UITextStyle.regular.copyWith(
                      fontSize: 14,
                      color: UIColors.boldText.withOpacity(0.8),
                    ),
                  ),
                ],
              ),
            ),
          ),
          const SizedBox(
            height: 20,
          ),
          Container(
            color: UIColors.white,
            width: double.infinity,
            child: Padding(
              padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 12),
              child: Column(
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  Text(
                    'Về MFast',
                    style: UITextStyle.bold.copyWith(fontSize: 16, color: UIColors.boldText),
                  ),
                  SectionContent(
                    title: 'Giới thiệu về MFast',
                    onTap: () {
                      context.pushRoute(WebViewRoute(
                        title: 'MFAST',
                        url: AppData.instance.appInfo.introduceUrlMFast ?? '',
                      ));
                    },
                  ),
                  SectionContent(
                    title: 'Phiên bản hiện tại',
                    content: "${packageInfo?.version} (${packageInfo?.buildNumber})",
                  ),
                  SectionContent(
                    title: 'Điều khoản sử dụng',
                    onTap: () {
                      context.pushRoute(WebViewRoute(
                        title: 'Điều khoản sử dụng',
                        url: AppData.instance.appInfo.termsOfUsageUrl ?? '',
                      ));
                    },
                  ),
                  SectionContent(
                    title: 'Cam kết bảo mật',
                    onTap: () {
                      context.pushRoute(WebViewRoute(
                        title: 'Cam kết bảo mật',
                        url: AppData.instance.appInfo.privacyPolicyUrl ?? '',
                      ));
                    },
                    hideDivider: true,
                  ),
                ],
              ),
            ),
          ),
          const SizedBox(
            height: 20,
          ),
          Text(
            'Công ty Cổ phần Giải Pháp Thanh Toán Số\nToà Athena, 146-148 Cộng Hoà, P.12\nQ.Tân Bình, Tp. HCM',
            textAlign: TextAlign.center,
            style: UITextStyle.regular.copyWith(
              fontSize: 14,
              color: UIColors.boldText.withOpacity(0.6),
            ),
          ),
          const SizedBox(
            height: 10,
          ),
          Text(
            'Copyright © 2015',
            textAlign: TextAlign.center,
            style: UITextStyle.regular.copyWith(
              fontSize: 14,
              color: UIColors.boldText.withOpacity(0.6),
            ),
          )
        ],
      ),
    );
  }
}
