import 'package:flutter/material.dart';
import 'package:flutter_module/common/colors.dart';
import 'package:flutter_module/common/styles.dart';
import 'package:flutter_module/common/widgets/buttons.dart';
import 'package:flutter_module/common/widgets/images.dart';
import 'package:flutter_module/models/otp/otp_option_model.dart';

final optionViews = [
  OtpOptionModel(
    id: 'voice',
    icon: 'ic_circle_call',
    label: 'Cuộc gọi',
  ),
  OtpOptionModel(
    id: 'sms',
    icon: 'ic_circle_sms',
    label: 'Tin nhắn',
  ),
  OtpOptionModel(
    id: 'email',
    icon: 'ic_circle_email',
    label: 'Email',
  ),
];

class OptionResendOTPWidget extends StatelessWidget {
  final Function(String) onTapOption;
  final bool alowRetryEmail;
  final List<String> options;

  const OptionResendOTPWidget({
    super.key,
    required this.onTapOption,
    this.alowRetryEmail = false,
    this.options = const [],
  });

  @override
  Widget build(BuildContext context) {
    return Row(
      mainAxisAlignment: MainAxisAlignment.spaceEvenly,
      children: _getOption(),
    );
  }

  _getOption() {
    final items = optionViews;
    if (!alowRetryEmail) {
      items.removeWhere((element) => element.id == 'email');
    }
    return List.generate(
      items.length,
      (index) {
        final item = items[index];
        return SplashButton(
          onTap: () {
            onTapOption(item.id!);
          },
          child: Column(
            children: [
              AppImage.asset(
                asset: item.icon,
                width: 48,
                height: 48,
              ),
              const SizedBox(
                height: 8,
              ),
              Text(
                item.label ?? "",
                style: UITextStyle.regular.copyWith(
                  fontSize: 14,
                  color: UIColors.grayText,
                ),
              ),
            ],
          ),
        );
      },
    );
  }
}
