import 'package:flutter_module/common/utils/text_util.dart';
import 'package:flutter_module/di/get_it.dart';
import 'package:universal_html/html.dart';
import 'package:url_launcher/url_launcher.dart';

import '../../routes/routes.dart';
import '../../routes/routes.gr.dart';
import '../../services/bridge/bridge_service.dart';
import '../global_function.dart';

class RedirectUtil {
  RedirectUtil._();

  static backToMTradeRoot() {
    getItInstance.get<AppRouter>().popUntil((route) => route.settings.name == MTradeRoute.name);
  }

  static backToMFast() {
    getItInstance.get<AppRouter>().popUntilRoot();
  }

  static openUrl(String? url) {
    if (TextUtils.isEmpty(url)) {
      return;
    }
    window.location.href = url!;
  }

  static openMFastDeepLink(String? url) {
    if (TextUtils.isEmpty(url)) {
      return;
    }
    backToMFast();
    GlobalFunction.launchScheme(
      url!,
      mode: LaunchMode.externalApplication,
    );
  }
}
